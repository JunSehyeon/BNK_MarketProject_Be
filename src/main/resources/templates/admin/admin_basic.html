<div th:replace="~{admin/_header.html}"></div>
<style>
    .title-line {
        width: 880px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-left: 20px;
    }

    table {
        border-collapse: collapse;
        width: 880px;
        margin-left: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        border-left: none;
        border-right: none;
        padding: 10px;
        font-weight: normal;
    }
    .th-blue {
        background-color: #f2f2f2;
        text-align: left;
    }
    .th-gray {
        background-color: #f2f2f2;
        text-align: left;
    }

    .section-title {
        font-weight: bold;
        font-size: 16px;
        margin-top: 20px;
        margin-bottom: 10px;
        margin-left: 20px;
    }
    .status-gap {
        height: 10px;
        border: none;
    }
    .btn {
        padding: 8px 12px;
        background-color: #000000;
        color: #fff;
        border: none;
        cursor: pointer;
        float: right;
    }

    html{ scrollbar-gutter: stable; }
    .icon-btn {
        background:none; border:1px solid #000; cursor:pointer;
        width:40px; height:40px; display:grid; place-items:center;
    }
</style>
    <main style="display: flex; justify-content: center; border-top:1px solid #e2e2e2;">
        <div>
        <aside class="euro-nav" aria-label="관리자 사이드 메뉴" style="">
            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">환경설정</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item is-active"><a href="#">기본설정</a></li>
                <li class="euro-nav__item"><a href="#">배너관리</a></li>
                <li class="euro-nav__item"><a href="#">약관관리</a></li>
                <li class="euro-nav__item"><a href="#">카테고리</a></li>
                <li class="euro-nav__item"><a href="#">버전관리</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">상점관리</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">상점목록</a></li>
                <li class="euro-nav__item"><a href="#">매출현황</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">회원관리</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">회원목록</a></li>
                <li class="euro-nav__item"><a href="#">포인트관리</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">상품관리</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">상품목록</a></li>
                <li class="euro-nav__item"><a href="#">상품등록</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">주문관리</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">주문현황</a></li>
                <li class="euro-nav__item"><a href="#">배송현황</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">쿠폰관리</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">쿠폰목록</a></li>
                <li class="euro-nav__item"><a href="#">쿠폰발급현황</a></li>
            </ul>
            </section>

            <section class="euro-nav__group">
            <h4 class="euro-nav__title" style="">고객센터</h4>
            <ul class="euro-nav__list">
                <li class="euro-nav__item"><a href="#">공지사항</a></li>
                <li class="euro-nav__item"><a href="#">자주묻는질문</a></li>
                <li class="euro-nav__item"><a href="#">문의하기</a></li>
                <li class="euro-nav__item"><a href="#">채용하기</a></li>
            </ul>
            </section>           
        </aside>
        </div>        
        <div style=" border-left:1px solid #e2e2e2;"></div>
        <div style="margin-left:40px; width:900px; height:1500px; ">

    <div class="title-line" style="border-bottom: 2px solid #ccc;">
        <div style="padding-top: 10px; padding-bottom: 5px; font-size: 22px;"><b>기본설정</b></div>
        <div>HOME > 환경설정 > <b>기본 설정</b></div>
    </div>   

    <!-- 버전 정보 -->
    <div class="title-line" style="padding-top: 20px; padding-bottom: 5px;"><b>버전 정보</b></div>
    <table>
        <tr class="th-gray">
            <th colspan="2">현재 사이트 버전 입니다.</th>
        </tr>
        <tr class="status-gap"></tr>
        <tr>
            <th class="th-blue" style="width: 120px;">사이트 버전</th>
            <td th:text="${appVersion}"></td>
        </tr>
    </table>

    <!-- 사이트 -->
    <div class="title-line" style="padding-top: 20px; padding-bottom: 5px;"><b>사이트</b></div>

    <form th:action="@{/admin/admin_basic}" method="post" th:object="${config}">
        <table>
            <tr class="th-gray">
                <th colspan="2">브라우저 탭, 헤더 및 푸터 노출 정보 입니다.</th>
            </tr>
            <tr class="status-gap"></tr>
            <tr>
                <th class="th-blue" style="width: 150px;">제목</th>
                <td>
                    <input type="text" th:field="*{siteTitle}"    placeholder="사이트 제목"/>
                </td>
            </tr>
            <tr>
                <th class="th-blue">부제</th>
                <td>
                    <input type="text" th:field="*{siteSubtitle}" placeholder="사이트 서브타이틀"/>
                </td>
            </tr>
        </table>
        <button class="btn" type="submit">수정하기</button>
    </form>

    <!-- 로고 -->
    <div class="title-line" style="padding-bottom: 5px;"><b>로고</b></div>

    <form th:action="@{/admin/admin_basic}" method="post" enctype="multipart/form-data">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <!-- 기존 값도 함께 보냄: 새 파일이 없으면 서비스에서 이 값 유지 -->
        <input type="hidden" name="headerLogo" th:value="${config.headerLogo}">
        <input type="hidden" name="footerLogo" th:value="${config.footerLogo}">
        <input type="hidden" name="favicon"    th:value="${config.favicon}">

        <table>
            <tr class="th-gray">
                <th colspan="2">브라우저 탭, 헤더 및 푸터 노출 로고 입니다.</th>
            </tr>
            <tr class="status-gap"></tr>

            <!-- 헤더 로고 -->
            <tr>
                <th class="th-blue" style="width: 150px;">헤더 로고</th>
                <td>
                    <input type="file" name="headerLogoFile" accept="image/*"
                           style="border: 2px solid #ced4da; padding: 2px;">
                    <span> 크기 370 × 76 권장</span>

                    <!-- 미리보기 -->
                    <div th:if="${config.headerLogo}" style="margin-top:8px;">
                        <img th:src="${config.headerLogo}" alt="Header Logo" style="max-height:76px; max-width:370px;">
                        <label style="margin-left:8px;">
                            <input type="checkbox" name="removeHeaderLogo"> 제거
                        </label>
                    </div>
                </td>
            </tr>

            <!-- 푸터 로고 -->
            <tr>
                <th class="th-blue">푸터 로고</th>
                <td>
                    <input type="file" name="footerLogoFile" accept="image/*"
                           style="border: 2px solid #ced4da; padding: 2px;">
                    <span> 크기 155 × 36 권장</span>

                    <div th:if="${config.footerLogo}" style="margin-top:8px;">
                        <img th:src="${config.footerLogo}" alt="Footer Logo" style="max-height:36px; max-width:155px;">
                        <label style="margin-left:8px;">
                            <input type="checkbox" name="removeFooterLogo"> 제거
                        </label>
                    </div>
                </td>
            </tr>

            <!-- 파비콘 -->
            <tr>
                <th class="th-blue">파비콘</th>
                <td>
                    <input type="file" name="faviconFile" accept="image/*,.ico"
                           style="border: 2px solid #ced4da; padding: 2px;">
                    <span> 크기 32 × 32 권장</span>

                    <div th:if="${config.favicon}" style="margin-top:8px;">
                        <img th:src="${config.favicon}" alt="Favicon" style="width:32px;height:32px;">
                        <label style="margin-left:8px;">
                            <input type="checkbox" name="removeFavicon"> 제거
                        </label>
                    </div>
                </td>
            </tr>
        </table>
        <button type="submit" class="btn">수정하기</button>
    </form>

    <!-- 기업 정보 -->
            <form th:action="@{/admin/admin_basic}" method="post" th:object="${config}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="section" value="company"/>

                <div class="title-line"><b>기업 정보</b></div>
                <table>
                    <tr class="th-gray"><th colspan="2">브라우저 탭, 헤더 및 푸터 노출 정보 입니다.</th></tr>
                    <tr><th class="th-blue">상호명</th>
                        <td><input type="text" th:field="*{companyName}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">대표이사</th>
                        <td><input type="text" th:field="*{ceoName}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">사업자등록번호</th>
                        <td><input type="text" th:field="*{bizRegNo}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">통신판매업신고</th>
                        <td><input type="text" th:field="*{mailOrderNo}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">기본주소</th>
                        <td><input type="text" th:field="*{addrBase}" style="width:350px"/></td></tr>
                    <tr><th class="th-blue">상세주소</th>
                        <td><input type="text" th:field="*{addrDetail}" style="width:350px"/></td></tr>
                </table>
                <button class="btn" type="submit">수정하기</button>
            </form>


            <!-- 고객센터 정보 -->
            <form th:action="@{/admin/admin_basic}" method="post" th:object="${config}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="section" value="cs"/>

                <div class="title-line"><b>고객센터 정보</b></div>
                <table>
                    <tr class="th-gray"><th colspan="2">푸터에 노출되는 고객센터 정보 입니다.</th></tr>
                    <tr><th class="th-blue">전화번호</th>
                        <td><input type="text" th:field="*{csTel}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">업무시간</th>
                        <td><input type="text" th:field="*{csHours}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">이메일</th>
                        <td><input type="email" th:field="*{csEmail}" style="width:250px"/></td></tr>
                    <tr><th class="th-blue">전자금융거래 분쟁담당</th>
                        <td><input type="text" th:field="*{efinDisputeTel}" style="width:250px"/></td></tr>
                </table>
                <button class="btn" type="submit">수정하기</button>
            </form>


            <!-- 카피라이트 -->
            <form th:action="@{/admin/admin_basic}" method="post" th:object="${config}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="section" value="copyright"/>

                <div class="title-line"><b>카피라이트</b></div>
                <table>
                    <tr class="th-gray"><th colspan="2">푸터에 노출되는 고객센터 정보 입니다.</th></tr>
                    <tr><th class="th-blue">카피라이트</th>
                        <td><input type="text" th:field="*{copyrightText}" style="width:300px"/></td></tr>
                </table>
                <button class="btn" type="submit">수정하기</button>
            </form>

        </div>
    </main>

    <style>
        .euro-nav__list {
            max-height: 0;                /* 기본은 접힘 */
            overflow: hidden;             /* 안 보이게 */
            transition: max-height 0.15s ease;
        }

            .euro-nav__group.open .euro-nav__list {
            max-height: 500px;            /* 펼쳐졌을 때 (충분히 크게 설정) */
        }
    </style>
    <script>
        // 아코디언: 클릭 시 높이를 실제 내용 높이로 애니메이션
  document.querySelectorAll('.euro-nav__title').forEach(title => {
    title.style.cursor = 'pointer'; // 클릭 가능 시각화(선택)
    title.addEventListener('click', () => {
      const group = title.parentElement;
      const list  = group.querySelector('.euro-nav__list');

      const isOpen = group.classList.contains('open');

      if (isOpen) {
        // 닫기: 현재 높이를 고정 -> 0으로
        list.style.maxHeight = list.scrollHeight + 'px';
        // 강제 리플로우로 트랜지션 시작점 확정
        list.offsetHeight; 
        list.style.maxHeight = '0px';
        group.classList.remove('open');
      } else {
        // 열기: 0 -> 내용 높이
        group.classList.add('open');
        list.style.maxHeight = list.scrollHeight + 'px';

        // 애니메이션 끝나면 inline max-height 제거(자연스런 레이아웃)
        const onEnd = (e) => {
          if (e.propertyName === 'max-height') {
            list.style.maxHeight = 'none';
            list.removeEventListener('transitionend', onEnd);
          }
        };
        list.addEventListener('transitionend', onEnd);
      }
    });
  });

  const groups = document.querySelectorAll('.euro-nav__group');
  document.querySelectorAll('.euro-nav__title').forEach(title => {
    title.addEventListener('click', () => {
      groups.forEach(g => {
        if (g !== title.parentElement && g.classList.contains('open')) {
          const l = g.querySelector('.euro-nav__list');
          l.style.maxHeight = l.scrollHeight + 'px';
          l.offsetHeight;
          l.style.maxHeight = '0px';
          g.classList.remove('open');
        }
      });
    }, {capture:true});
  });
  
    </script>
<div th:replace="~{admin/_footer.html}"></div>