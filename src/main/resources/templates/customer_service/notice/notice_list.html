<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공지사항 목록</title>

    <style>
        .icon-btn {
            background:none; border:1px solid #000; cursor:pointer;
            width:40px; height:40px; display:grid; place-items:center;
        }

        /* 1) 스크림(배경) - 화면 전체 덮음 + 블러 */
        .overlay {
            position: fixed; inset: 0;
            background: rgba(255,255,255,0.28);      /* 반투명이어야 blur 보임 */
            backdrop-filter: blur(1px);
            -webkit-backdrop-filter: blur(1px); /* 사파리용 */
            opacity: 0;
            pointer-events: none;
            transition: opacity .25s ease;
            z-index: 1000;
        }
        .overlay.open { opacity: 1; pointer-events: auto; }

        /* 2) 왼쪽에서 나오는 패널 */
        .overlay__panel {
            position: absolute; top:0; left:0;
            width: 50vw;                 /* 화면 절반 */
            max-width: 900px;            /*(선택) 최대 폭 제한 */
            height: 100%;
            background: white;         /* 패널 자체는 불투명해도 OK */
            transform: translateX(-100%); /* 화면 밖에서 시작 */
            transition: transform .35s ease;
            will-change: transform;
            display: flex; flex-direction: column;
        }
        .overlay.open .overlay__panel { transform: translateX(0); }

        /* 상단 닫기 버튼과 로고 영역 */
        .overlay__top {
            display:flex; align-items:center; gap:24px;
            padding:20px;
        }
        .overlay__close {
            background:none; border:1px solid; width:100px; height:50px; cursor:pointer;
            position:relative;
            border:none;
            margin-left:0.3%;
        }
        .overlay__close::before,
        .overlay__close::after{
            content:""; position:absolute; left:15px; right:10px; top:25px; height:2px; background:#000;
        }
        .overlay__close::before{ transform:rotate(45deg); }
        .overlay__close::after { transform:rotate(-45deg); }

        /* 메뉴 그리드 */
        .overlay__menu {
            display:grid; grid-template-columns: 180px auto; gap:24px;
            padding:40px 20px; font-size:16px;
        }
        .overlay__menu a {
            text-decoration:none; color:#000; display:block; padding:8px 0;
        }
        .overlay__menu strong { font-weight:700; }
        /* Header Sticky 및 background 적용 */
        :root{
            --glass-bg: rgba(255,255,255,.55); /* 호버 시 배경 투명도 */
            --glass-blur: 8px;                 /* 블러 정도 */
        }
        *{ box-sizing: border-box; }
        body{ margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
        a{ color:inherit; text-decoration:none; }
        ul{ margin:0; padding:0; list-style:none; }

        /* ===== 헤더 (처음엔 투명, hover 시 반투명) ===== */
        .site-header{
            top: 0;
            z-index: 900;          /* 오버레이(1000)보다 낮게 */
        }
        .site-header::before{
            content:"";
            position:absolute; inset:0;
            background: rgba(255,255,255,0);            /* 기본 완전 투명 */
            transition: background 0.4s ease;
            z-index: -1;
            pointer-events: none;                        /* 클릭 방해 금지 */
        }
        .site-header:hover::before{
            background: rgba(255,255,255,0.7);                /* 마우스 올리면 반투명 */
        }
        .site-header .inner{
            position: relative; z-index: 1;             /* ::before 아래로 깔리게 */
            display:flex; align-items:center; gap:24px;
            padding: 16px 24px;
            border-bottom: 1px solid #000;              /* 필요 없으면 제거 */
        }
        .title-didone{
            text-align:center;
            font-family: 'Bodoni Moda','Didot','Bodoni 72','Times New Roman',serif;
            margin-left:45px;
            font-weight:400;
            letter-spacing:.02em;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .title-didone.ko{font-family: 'Noto Serif KR','Bodoni Moda',serif; font-weight:300;}



        /* 간단한 스타일 추가 */
        .cs_sub_nav ul li.on a {
            font-weight: bold;
            color: #333;
        }
        .cs_sub_nav ul li a {
            cursor: pointer;
        }
        /* 페이지네이션 스타일 */
        .prev-page, .next-page {
            border: none;
            width: 50px;
            height: 30px;
            cursor: pointer;
            margin: 0 10px;
        }

        body {
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            font-size: 14px;
            color: #333;
            line-height: 1.5;
            background-color: #f8f8f8;
        }

        #wrap {
            width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #content {
            padding: 30px;
            min-height: 600px;
        }

        h1 {
            font-size: 24px;
            font-weight: bold;
            color: #000;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background-color: #f4f4f4;
            font-weight: bold;
        }
        table a {
            text-decoration: none;
        }
        .btn_area {
            text-align: right;
            margin-top: 20px;
        }

        .btn_area .btn_write, .btn_area .btn_cancel, .btn_area .btn_submit, .btn_area .btn_list, .btn_area .btn_more {
            display: inline-block;
            padding: 10px 20px;
            font-size: 14px;
            text-decoration: none;
            border: 1px solid #ccc;
            background-color: #eee;
            color: #333;
            cursor: pointer;
        }

        .btn_area .btn_write {
            background-color: #555;
            color: #fff;
            border-color: #555;
        }

        .btn_area .btn_submit {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;
        }

        .red {
            color: #ff0000;
        }

        /* Sub Navigation (사이드 메뉴) */
        .cs_sub_nav {
            float: left;
            width: 180px;
        }

        .cs_sub_nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .cs_sub_nav li a {
            display: block;
            padding: 15px 10px;
            border-bottom: 1px solid #ddd;
            text-decoration: none;
            color: #555;
        }

        .cs_sub_nav li.on a,
        .cs_sub_nav li a:hover {
            background-color: gray !important;
            color: white !important;
        }

        /* notice sub nav 색깔 수정전
         .cs_sub_nav li.on a, .cs_sub_nav li a:hover {
            background-color: #f0f0f0;
            color: #000;
            font-weight: bold;
        } */

        /* Pagination */
        .pagination {
            text-align: center;
            margin-top: 20px;
        }

        .pagination a {
            display: inline-block;
            min-width: 30px;
            height: 30px;
            line-height: 30px;
            border: 1px solid #ddd;
            color: #555;
            text-decoration: none;
            margin: 0 2px;
            text-align: center;
            padding: 0 6px;
            box-sizing: border-box;
        }

        .pagination a.on {
            background-color: #333;
            color: #fff;
            border-color: #333;
        }

        /* cs/index.jsp 스타일 */
        .cs_main_wrap {
            text-align: center;
        }

        .cs_main_wrap h1 {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 50px;
            color: #444;
        }

        .cs_main_wrap .cs_section {
            max-width: 900px;
            margin: 0 auto 40px;
        }

        .cs_main_wrap .section_title {
            font-size: 20px;
            font-weight: bold;
            border-bottom: 2px solid #555;
            padding-bottom: 10px;
            margin-bottom: 20px;
            position: relative;
            text-align: left;
        }

        .cs_main_wrap .section_title .more_link {
            font-size: 16px;
            position: absolute;
            right: 0;
            top: 0;
            text-decoration: none;
            color: #0f71d3;
            font-weight: bold;
        }

        .cs_main_wrap .section_list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .cs_main_wrap .section_list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dotted #ccc;
        }

        .cs_main_wrap .section_list a {
            text-decoration: none;
            color: #333;
            flex-grow: 1;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .cs_main_wrap .section_list .date,
        .cs_main_wrap .section_list .writer {
            font-size: 13px;
            color: #999;
            flex-shrink: 0;
            margin-left: 15px;
        }

        /* 자주하는 질문 아이콘 섹션 */
        .cs_main_wrap .faq_category {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .cs_main_wrap .faq_category a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            text-decoration: none;
            color: #555;
            flex: 1;
            padding: 20px 10px;
            /* index의 faq border 제거
            border: 1px solid #ddd;*/
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        .cs_main_wrap .faq_category a:hover {
            background-color: #f5f5f5;
        }

        .cs_main_wrap .faq_category img {
            width: 50px;
            height: 50px;
            margin-bottom: 8px;
        }

        .cs_main_wrap .faq_category span {
            font-size: 13px;
            line-height: 1.2;
        }

        .cs_main_wrap .qna_section .btn_area {
            text-align: right;
            margin-top: 15px;
        }

        .cs_main_wrap .qna_section .btn_write {
            display: inline-block;
            padding: 10px 20px;
            background-color: #555;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }


        .cs_sub_nav {
            width: 100%;
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }

        .cs_sub_nav ul {
            display: flex;
            padding: 0;
            margin: 0;
            list-style: none;
            width: 100%;
        }

        .cs_sub_nav ul li {
            flex: 1; /* ← 화면 가로를 각 항목이 1/n 로 균등 분할 */
            text-align: center;
            border-right: 1px solid #ddd;
        }

        .cs_sub_nav ul li:last-child {
            border-right: none;
        }

        .cs_sub_nav ul li a {
            display: block;
            padding: 15px 0;
            text-decoration: none;
            color: #333;
            font-weight: bold;
            background-color: #fff;
            transition: background-color 0.2s, color 0.2s;
        }

        .cs_sub_nav ul li.on a,
        .cs_sub_nav ul li a:hover {
            background-color: gray;
            color: white;
        }

    </style>
</head>
<body>

    <header th:replace="main/header :: header">
        <div style="margin-left:2%; width:98%; box-sizing: border-box; margin-top:2%; display:flex; height:230px;">
            <button style="border:none;" id="menuBtn" class="icon-btn" aria-controls="menuOverlay" aria-expanded="false" aria-label="메뉴 열기">
                <svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                    <rect y="12" width="64" height="1" fill="black"/>
                    <rect y="30" width="64" height="1" fill="black"/>
                    <rect y="48" width="64" height="1" fill="black"/>
                </svg>
            </button>
            <div style="margin-left:3%;">
                <img src="/images/logo.png" alt="" style="width:270px;">
            </div>
            <div style="margin-top:27px; margin-left:auto; margin-right:3%; flex:1; max-width:30%;">
                <ul style="list-style-type: none; padding: 0; margin:0; display:flex; gap:40px;">
                    <li style="flex:1; min-width: 100px;">
                        <form action="" method="" style="width:100%;">
                            <input type="text" style="background: transparent;border:none; border-bottom:1px solid; padding-bottom:10px; width:80%;" value="검색"
                                   onfocus="this.style.outline='none';"
                                   onblur="this.style.outline='none';">
                        </form>
                    </li>
                    <li><a href="#" style="text-decoration: none; color:black; font-size:14px;">로그인</a></li>
                    <li><a href="#" style="text-decoration: none; color:black; font-size:14px;">도움말</a></li>
                    <li><a href="#" style="text-decoration: none; color:black; font-size:14px;">바스켓백 [0]</a></li>
                </ul>
            </div>
        </div>
    </header>



    <aside id="menuOverlay" class="overlay" aria-hidden="true">
        <div class="overlay__panel">
            <div class="overlay__top"  style="margin-top:20px;">
                <button id="closeBtn" class="overlay__close" aria-label="메뉴 닫기"></button>
                <div style="font-size:72px; font-weight:800; letter-spacing:-10px; "class="title-didone">NICHIYA</div>
            </div>
            <style>
                /* 우측 서브항목 기본은 숨김 + 페이드 트랜지션 준비 */
                .sub {
                    opacity: 0;
                    transform: translateY(6px);
                    pointer-events: none;
                    transition: opacity .28s ease, transform .28s ease;
                    display: none; /* 시각·레이아웃 모두 숨김 */
                }
                /* 보여줄 때 */
                .sub.show {
                    display: block;
                    opacity: 1;
                    transform: translateY(0);
                    pointer-events: auto;
                }
                /* 오른쪽 컬럼은 패널들을 포개는 '스테이지' */
                #subcol{
                    grid-row: span 2;
                    height:900px;
                    position: relative;          /* 자식 absolute 기준점 */
                    padding: 0;                  /* 안쪽 여백은 패널에서 */
                }
                /* 접근성: 현재 선택된 카테고리 표시(선택사항) */
                .overlay__menu a[data-cat].is-active { font-weight: 700; text-decoration: underline; }

                /* 오른쪽 컬럼의 항목은 여백 제거(전역 a padding 무시) */
                #subcol .sub{
                    padding:0;
                    margin:0;
                }
                /* 패널: 전부 겹쳐 놓고 기본은 숨김 */
                #subcol .panel{
                    position: absolute; inset: 0;
                    padding: 20px;
                    overflow: auto;
                    opacity: 0;
                    transform: translateY(6px);
                    transition: opacity .35s ease, transform .35s ease;
                    visibility: hidden;   /* display 대신 visibility */
                    pointer-events: none; /* 숨길 때 클릭 방지 */
                }

                /* 보이는 패널 */
                #subcol .panel.show{
                    opacity: 1;
                    transform: none;
                    visibility: visible;
                    pointer-events: auto; /* 다시 클릭 가능 */
                }

                /* 예시용 그리드(원하면 커스터마이즈) */
                .menu-grid{
                    display: grid;
                    grid-template-columns: repeat(2, auto);
                    column-gap: 50px;   /* 가로 간격 여기서 조절 */
                    row-gap: 6px;      /* 세로 간격(필요시) */
                    padding: 0;        /* UL 기본 패딩 제거 */
                    margin: 0;         /* UL 기본 마진 제거 */
                    justify-content: start; /* 왼쪽 정렬 */
                }
                .menu-grid li{ list-style: none; }
                #header{ display: contents; }
            </style>



            <div style="display: flex; margin-left:20%; margin-top:1%; width:100%;">
                <nav class="overlay__menu" style="width:100%;">
                    <div style="">
                        <a href="#"><b>공지사항</b></a>
                        <br><br>
                        <a href="#" data-cat="fashion">전체</a>
                        <a href="#" data-cat="digital">고객서비스</a>
                        <a href="#" data-cat="grocery">안전거래</a>
                        <a href="#" data-cat="home">위해상품</a>
                        <a href="#" data-cat="book">이벤트당첨</a>
                    </div>
                    <div id="subcol">
                        <!-- 전체 -->
                        <section class="panel" data-key="fashion">
                            <h3>전체</h3>
                            <ul class="menu-grid">
                                <li><a href="#">#</a></li>
                            </ul>
                        </section>

                        <!-- 고객서비스 -->
                        <section class="panel" data-key="digital">
                            <h3>고객서비스</h3>
                            <div class="menu-grid">
                                <a href="#">#</a>
                            </div>
                        </section>

                        <!-- 안전거래 -->
                        <section class="panel" data-key="grocery">
                            <h3>안전거래</h3>
                            <div class="menu-grid">
                                <a href="#">#</a>
                            </div>
                        </section>

                        <!-- 위해상품 -->
                        <section class="panel" data-key="home">
                            <h3>위해상품</h3>
                            <div class="menu-grid">
                                <a href="#">#</a>
                            </div>
                        </section>

                        <!-- 이벤트당첨 -->
                        <section class="panel" data-key="book">
                            <h3>이벤트당첨</h3>
                            <div class="menu-grid">
                                <a href="#">#</a>
                            </div>
                        </section>
                    </div>
                    <div style=""></div>
                </nav>
            </div>
        </div>
    </aside>

    <div id="content">
        <h1>NOTICE</h1>
        <div class="cs_sub_nav">
            <ul>
                <li th:classappend="${category == null or category == '' or category == '전체'} ? 'on'">
                    <a th:href="@{/notice/list}">전체</a>
                </li>
                <li th:classappend="${category == '고객서비스'} ? 'on'">
                    <a th:href="@{/notice/list(category='고객서비스')}">고객서비스</a>
                </li>
                <li th:classappend="${category == '안전거래'} ? 'on'">
                    <a th:href="@{/notice/list(category='안전거래')}">안전거래</a>
                </li>
                <li th:classappend="${category == '위해상품'} ? 'on'">
                    <a th:href="@{/notice/list(category='위해상품')}">위해상품</a>
                </li>
                <li th:classappend="${category == '이벤트당첨'} ? 'on'">
                    <a th:href="@{/notice/list(category='이벤트당첨')}">이벤트당첨</a>
                </li>
            </ul>
        </div>


        <div class="cs_list_table">
            <p class="total_count">
                총 <span class="count" th:text="${totalCount}"></span>건
            </p>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: auto;">
                    <col style="width: 20%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>분류</th>
                        <th>제목</th>
                        <th>등록일</th>
                    </tr>
                </thead>
                <tbody>
                <tr th:each="n : ${dtoPage.content}">
                    <td th:text="${n.category}"></td>
                    <td>
                        <a th:href="@{/notice/view/{id}(id=${n.noticeid})}" th:text="${n.title}"></a>
                    </td>
                    <td th:text="${#temporals.format(n.createdAt, 'yyyy-MM-dd')}"></td>
                </tr>
                </tbody>
            </table>

            <!-- 페이지네이션 -->
            <div class="pagination">
                <!-- 이전 버튼 -->
                <a th:href="@{/notice/list(page=${dtoPage.number > 0 ? dtoPage.number - 1 : 0}, category=${category})}"><b>이전</b></a>

                <!-- 페이지 번호 -->
                <span th:each="i : ${#numbers.sequence(0, dtoPage.totalPages - 1)}">
                    <a th:href="@{/notice/list(page=${i}, category=${category})}"
                       th:text="${i + 1}"
                       th:classappend="${i == dtoPage.number} ? 'on'"></a>
                </span>

                <!-- 다음 버튼 -->
                <a th:href="@{/notice/list(page=${dtoPage.number < dtoPage.totalPages - 1 ? dtoPage.number + 1 : dtoPage.totalPages - 1}, category=${category})}"><b>다음</b></a>
            </div>
    </div>
<div th:replace="main/footer :: footer"></div>

        <script>
            // --- 요소 가져오기 ---
            const body     = document.body;
            const menuBtn  = document.getElementById('menuBtn');   // 왼쪽 상단 버튼
            const closeBtn = document.getElementById('closeBtn');  // X 버튼
            const overlay  = document.getElementById('menuOverlay'); // 전체 오버레이

            // --- 메뉴 열기 ---
            function openMenu(){
                overlay.classList.add('open');  // CSS .open 적용 → 왼쪽에서 패널 슬라이드
                overlay.setAttribute('aria-hidden', 'false');
                menuBtn.setAttribute('aria-expanded', 'true');
                body.style.overflow = 'hidden'; // 배경 스크롤 막음
            }

            // --- 메뉴 닫기 ---
            function closeMenu(){
                overlay.classList.remove('open');
                overlay.setAttribute('aria-hidden', 'true');
                menuBtn.setAttribute('aria-expanded', 'false');
                body.style.overflow = ''; // 스크롤 다시 가능
            }

            // --- 이벤트 연결 ---
            if(menuBtn && closeBtn && overlay){
                menuBtn.addEventListener('click', openMenu); // 버튼 클릭 시 열기
                closeBtn.addEventListener('click', closeMenu); // X 버튼 클릭 시 닫기

                // 배경 클릭 시 닫기
                overlay.addEventListener('click', (e) => {
                    if(e.target === overlay) closeMenu();
                });

                // ESC 키 눌렀을 때 닫기
                window.addEventListener('keydown', (e)=>{
                    if(e.key === 'Escape' && overlay.classList.contains('open')) closeMenu();
                });
            }
        </script>

        <script>
            // --- 왼쪽 카테고리 클릭 시 오른쪽 패널 열기 ---
            const menuLinks = document.querySelectorAll('.overlay__menu a[data-cat]');
            const panels    = document.querySelectorAll('#subcol .panel');

            menuLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();

                    // 1. 모든 패널 숨기기
                    panels.forEach(p => p.classList.remove('show'));

                    // 2. 클릭한 카테고리 가져오기
                    const key = link.getAttribute('data-cat');
                    const panel = document.querySelector(`#subcol .panel[data-key="${key}"]`);

                    // 3. 해당 패널만 보이기
                    if (panel) {
                        panel.classList.add('show');
                    }

                    // 4. 왼쪽 메뉴 active 처리 (선택사항)
                    menuLinks.forEach(l => l.classList.remove('is-active'));
                    link.classList.add('is-active');
                });
            });
        </script>

</body>
</html>